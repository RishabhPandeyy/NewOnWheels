<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- ================================================== -->
  <!-- ============== PRIMARY SEO META TAGS ============== -->
  <!-- ================================================== -->

  <title>Book Mechanic Instantly - No Signup Required | 24/7 Mobile Service | MechWay</title>

  <meta name="description" content="Schedule a mobile mechanic in Prayagraj instantly! NO ACCOUNT NEEDED - Fill our simple form for car/bike repair, battery replacement, tire service. Fast, easy booking in 30 minutes!">

  <meta name="keywords" content="book a mechanic, schedule car repair, mobile mechanic booking, prayagraj auto service, mechway mechanic booking">

  <meta name="author" content="MechWay Mechanic">
  <meta name="robots" content="index, follow">

  <link rel="canonical" href="https://www.mechwaymechanic.com/mechanic.html"> <!-- !! REPLACE with your actual URL !! -->
  
  <!-- Social Media, Fonts, and Icons (Same as index.html) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Re-using the exact same CSS from your index.html -->
  <style>
    /* --- Premium Variables & General Styling --- */
    :root {
        --primary-color: #00A3FF;
        --primary-glow: rgba(0, 163, 255, 0.3);
        --dark-navy: #0A192F;
        --light-navy: #112240;
        --slate: #8892b0;
        --light-slate: #a8b2d1;
        --white: #e6f1ff;
        --font-family: 'Poppins', sans-serif;
        --border-radius: 12px;
        --transition: all 0.25s cubic-bezier(0.645, 0.045, 0.355, 1);
        --section-padding: 6rem 5%;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
        font-family: var(--font-family);
        line-height: 1.6;
        background-color: var(--dark-navy);
        color: var(--slate);
        overflow-x: hidden;
    }
    .container { max-width: 1100px; margin: 0 auto; padding: 0 2rem; }
    section { padding: var(--section-padding); }
    .section-title { text-align: center; font-size: 2.8rem; margin-bottom: 1rem; font-weight: 700; color: var(--white); }
    .section-subtitle { text-align: center; font-size: 1.1rem; color: var(--slate); margin-bottom: 4rem; max-width: 600px; margin-left: auto; margin-right: auto; }
    .dark-section { background-color: var(--light-navy); }

    /* ======================= NAVBAR ======================= */
    .navbar { background: transparent; padding: 1.5rem 5%; position: fixed; width: 100%; top: 0; z-index: 1000; transition: all 0.3s ease-in-out; }
    .navbar.scrolled { background: rgba(10, 25, 47, 0.85); backdrop-filter: blur(10px); padding: 0.8rem 5%; box-shadow: 0 5px 20px rgba(0,0,0,0.5); }
    .navbar-container { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; }
    .navbar-logo { color: var(--white); font-size: 1.8rem; font-weight: 700; text-decoration: none; }
    .navbar-menu { display: flex; align-items: center; list-style: none; gap: 2rem; }
    .navbar-link { color: var(--light-slate); text-decoration: none; transition: var(--transition); }
    .navbar-link:hover, .navbar-link.active { color: var(--primary-color); }
    .call-now-button { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1.2rem; border: 1px solid var(--primary-color); border-radius: var(--border-radius); color: var(--primary-color); text-decoration: none; transition: var(--transition); }
    .call-now-button:hover { background-color: var(--primary-glow); box-shadow: 0 0 15px var(--primary-glow); }
    .hamburger { display: none; color: var(--white); font-size: 1.8rem; cursor: pointer; }
    
    /* ======================= PAGE HEADER ======================= */
    .page-header {
        padding-top: 12rem; /* Extra padding to account for fixed navbar */
        padding-bottom: 4rem;
        background: linear-gradient(rgba(10, 25, 47, 0.8), rgba(10, 25, 47, 1)), url('mechanic1.jpg') no-repeat center center/cover;
        text-align: center;
    }
    .page-header h1 {
        font-size: 3.5rem;
        color: var(--white);
        margin-bottom: 0.5rem;
    }
    .page-header p {
        font-size: 1.2rem;
        color: var(--light-slate);
    }
    
    /* ======================= CONTACT FORM STYLES (from index.html) ======================= */
    .contact-form-container {
        max-width: 800px;
        margin: 0 auto;
        background-color: var(--light-navy);
        padding: 3rem;
        border-radius: var(--border-radius);
        border: 1px solid #1d2d44;
    }
    .contact-form-container form {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }
    .contact-form-container label {
        color: var(--light-slate);
        font-weight: 600;
        margin-bottom: -0.5rem;
    }
    .contact-form-container input,
    .contact-form-container select,
    .contact-form-container textarea {
        width: 100%;
        padding: 1rem;
        background-color: var(--dark-navy);
        border: 1px solid #1d2d44;
        border-radius: var(--border-radius);
        color: var(--white);
        font-family: var(--font-family);
        font-size: 1rem;
        transition: var(--transition);
    }
    .contact-form-container input:focus,
    .contact-form-container select:focus,
    .contact-form-container textarea:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px var(--primary-glow);
    }
    .cta-button { /* Reusing CTA button style for submit */
        display: inline-block; padding: 1rem 2.5rem; border-radius: var(--border-radius); text-decoration: none; font-weight: 600; font-size: 1.1rem; transition: var(--transition); position: relative; overflow: hidden; background-color: var(--primary-color); color: var(--dark-navy); border: 1px solid var(--primary-color); box-shadow: 0 0 20px var(--primary-glow); cursor: pointer;
    }
    .cta-button:hover { transform: translateY(-3px); box-shadow: 0 0 30px var(--primary-color); }

    /* ======================= DYNAMIC FORM & LOCATION BUTTON STYLES (from index.html) ======================= */
    .vehicle-specifics-container {
        display: none; /* Hidden by default */
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
    }
    .form-grid-item {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }
    .location-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        width: 100%;
        padding: 0.8rem;
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--slate);
        background-color: var(--dark-navy);
        border: 1px solid #1d2d44;
        border-radius: var(--border-radius);
        cursor: pointer;
        transition: var(--transition);
        margin-top: 0.5rem;
    }
    .location-btn:hover { color: var(--white); border-color: var(--primary-color); }
    .location-btn:disabled { cursor: not-allowed; color: var(--slate); opacity: 0.6; }

    /* ======================= FOOTER (Same as index.html) ======================= */
    .main-footer { background-color: var(--dark-navy); padding: 4rem 5% 2rem; border-top: 1px solid var(--light-navy); }
    .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 3rem; margin-bottom: 3rem; text-align: center; }
    .footer-section h4 { color: var(--white); font-size: 1.2rem; margin-bottom: 1rem; }
    .footer-section a { color: var(--slate); text-decoration: none; display: block; margin-bottom: 0.5rem; transition: var(--transition); }
    .footer-section a:hover { color: var(--primary-color); }
    .trust-badges { display: flex; gap: 1rem; justify-content: center; }
    .trust-badges img { height: 40px; filter: grayscale(100%) brightness(1.5); }
    .footer-bottom { text-align: center; border-top: 1px solid #1d2d44; padding-top: 2rem; }
    .social-links { margin-top: 1rem; }
    .social-links a { color: var(--slate); font-size: 1.5rem; margin: 0 0.5rem; }
    .social-links a:hover { color: var(--primary-color); }
    
    /* ======================= RESPONSIVE DESIGN (Same as index.html) ======================= */
    @media (max-width: 768px) {
        .navbar-menu { display: none; position: absolute; top: 100%; left: 0; width: 100%; flex-direction: column; background-color: var(--light-navy); text-align: center; padding: 2rem 0; gap: 1.5rem; }
        .navbar-menu.active { display: flex; }
        .hamburger { display: block; }
        .page-header h1 { font-size: 2.5rem; }
        .vehicle-specifics-container { grid-template-columns: 1fr; }
        @media (min-width: 768px) { .trust-badges { justify-content: flex-start; } .footer-content { text-align: left; } }
    }
  </style>
</head>
<body>

    <!-- ======================= HEADER / NAVBAR (Same as index.html) ======================= -->
    <header class="navbar" id="main-navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-logo">MechWay</a>
            <div class="hamburger" id="mobile-menu"><i class="fas fa-bars"></i></div>
            <nav class="navbar-menu" id="nav-menu">
                <a href="index.html" class="navbar-link">Home</a>
                <a href="about.html" class="navbar-link">About</a>
                <a href="service.html" class="navbar-link">Services</a>
                <a href="shop.html" class="navbar-link">Shop</a>
                <a href="mechanic.html" class="navbar-link active">Book a Mechanic</a>
                <a href="tel:+919794575236" class="call-now-button"><i class="fas fa-phone"></i>Book Via Call</a>
            </nav>
        </div>
    </header>

    <!-- ======================= PAGE HEADER ======================= -->
    <section class="page-header">
        <h1>Book a Mechanic Instantly</h1>
        <p><strong>NO SIGNUP REQUIRED</strong> - Fill in your details below and we'll dispatch an expert to your location in 30 minutes.</p>
    </section>

    <!-- ======================= BOOKING FORM SECTION ======================= -->
    <section id="contact">
        <div class="container">
            <div class="contact-form-container">
                <div style="background: linear-gradient(45deg, #00A3FF, #0096FF); color: white; padding: 1rem; border-radius: 8px; margin-bottom: 2rem; text-align: center; font-weight: 600;">
                    <i class="fas fa-check-circle"></i> NO SIGNUP REQUIRED - Book Instantly & Get Service in 30 Minutes!
                </div>
                <form id="contact-form" novalidate>
                    <!-- Personal Details -->
                    <label for="name">Your Name</label>
                    <input type="text" id="name" name="name" placeholder="Enter your full name" required>

                    <label for="phone">Your Phone Number</label>
                    <input type="tel" id="phone" name="phone" placeholder="Enter your 10-digit mobile number" required>

                    <!-- Vehicle Details -->
                    <label for="vehicle-type">Vehicle Type</label>
                    <select id="vehicle-type" name="vehicle-type" required>
                        <option value="" disabled selected>Select Vehicle Type...</option>
                        <option value="Car">Car</option>
                        <option value="Bike">Bike</option>
                    </select>

                    <div id="vehicle-specifics" class="vehicle-specifics-container">
                        <div class="form-grid-item">
                            <label for="vehicle-brand">Brand</label>
                            <select id="vehicle-brand" name="vehicle-brand" required>
                                <option value="" disabled selected>Select Brand...</option>
                            </select>
                        </div>
                        <div class="form-grid-item">
                            <label for="vehicle-model">Model & Year</label>
                            <input type="text" id="vehicle-model" name="vehicle-model" placeholder="e.g., Swift 2018" required>
                        </div>
                    </div>

                    <!-- Service Details -->
                    <label for="problem">Service Required</label>
                    <select id="problem" name="problem" required>
                        <option value="" disabled selected>Select Service...</option>
                        <option value="General Checkup">General Checkup</option>
                        <option value="Tire Issue">Tire Issue (Flat, Puncture)</option>
                        <option value="Battery Issue">Battery Issue (Jump-start, Replacement)</option>
                        <option value="Engine Problem">Engine Problem (Not starting, Overheating)</option>
                        <option value="Brake Problem">Brake Problem</option>
                        <option value="Lockout Service">Lockout Service</option>
                        <option value="Fuel Delivery">Emergency Fuel Delivery</option>
                        <option value="Other">Other (Describe below)</option>
                    </select>

                    <label for="message">Location & Problem Details</label>
                    <textarea id="message" name="message" rows="5" placeholder="Please provide your current location (landmark, street name) and a brief description of the issue." required></textarea>
                    
                    <button type="button" id="getLocationBtn" class="location-btn">
                        <i class="fas fa-map-marker-alt"></i> Use My Current Location
                    </button>

                    <button type="button" id="submit-booking-btn" class="cta-button">Request Service</button>
                </form>
            </div>
        </div>
    </section>
    
    <!-- ======================= FOOTER (Same as index.html) ======================= -->
    <!-- ======================= FOOTER ======================= -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">

                <div class="footer-section"><h4>MechWay Mechanic</h4><p>Your trusted partner for 24/7 mobile auto repair and maintenance in Prayagraj.</p></div>
                <div class="footer-section"><h4>Quick Links</h4><a href="about.html">About Us</a><a href="service.html">Services</a><a href="service.html">Service Area</a><a href="contact.html">Contact</a></div>
                <div class="footer-section"><h4>Our Promise</h4><div class="trust-badges"><img src="https://via.placeholder.com/80x50/FFFFFF/0A192F?text=ASE" alt="ASE Certified Badge"><img src="https://via.placeholder.com/80x50/FFFFFF/0A192F?text=24/7" alt="24/7 Service Badge"></div></div>
            </div>
            <div class="footer-bottom">

                <p>¬© 2025 MechWay Mechanic. All rights reserved.</p>
                <div class="social-links"><a href="#"><i class="fab fa-facebook"></i></a><a href="#"><i class="fab fa-twitter"></i></a><a href="#"><i class="fab fa-instagram"></i></a></div>
            </div>
        </div>
    </footer>

    <script>
    // Wait for DOM to fully load
    document.addEventListener('DOMContentLoaded', function() {
        console.log("üîß Mechanic.html DOM loaded");

        // Navbar functionality
        const navbar = document.getElementById('main-navbar');
        if (navbar) {
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });
        }

        // Mobile menu
        const mobileMenu = document.getElementById('mobile-menu');
        const navMenu = document.getElementById('nav-menu');
        if (mobileMenu && navMenu) {
            mobileMenu.addEventListener('click', () => {
                navMenu.classList.toggle('active');
            });
        }

        // Vehicle brand/model selector
        const vehicleData = {
            Car: ['Maruti Suzuki', 'Hyundai', 'Tata Motors', 'Mahindra', 'Kia', 'Toyota', 'Honda', 'Volkswagen', 'Skoda', 'Renault', 'MG', 'Other'],
            Bike: ['Hero MotoCorp', 'Honda', 'TVS', 'Bajaj', 'Royal Enfield', 'Suzuki', 'Yamaha', 'KTM', 'Jawa', 'Other']
        };

        const vehicleTypeSelect = document.getElementById('vehicle-type');
        const brandSelect = document.getElementById('vehicle-brand');
        const specificsContainer = document.getElementById('vehicle-specifics');

        if (vehicleTypeSelect) {
            vehicleTypeSelect.addEventListener('change', function() {
                const selection = this.value;
                brandSelect.innerHTML = '<option value="" disabled selected>Select Brand...</option>';
                
                if (selection && vehicleData[selection]) {
                    vehicleData[selection].forEach(brand => {
                        const option = document.createElement('option');
                        option.value = brand;
                        option.textContent = brand;
                        brandSelect.appendChild(option);
                    });
                    specificsContainer.style.display = 'grid';
                } else {
                    specificsContainer.style.display = 'none';
                }
            });
        }

        // MAIN: Submit booking button
        const submitBtn = document.getElementById('submit-booking-btn');
        console.log("üîç Looking for submit button...");
        console.log("üìå Submit button element:", submitBtn);

        if (submitBtn) {
            console.log("‚úÖ Submit button found! Attaching click handler...");
            
            submitBtn.addEventListener('click', async function(e) {
                e.preventDefault();
                console.log("üöÄ BUTTON CLICKED!");
                
                // Get form values
                const name = document.getElementById('name').value.trim();
                const phone = document.getElementById('phone').value.trim();
                const vehicleType = document.getElementById('vehicle-type').value.trim();
                const vehicleBrand = document.getElementById('vehicle-brand').value.trim();
                const vehicleModel = document.getElementById('vehicle-model').value.trim();
                const problem = document.getElementById('problem').value.trim();
                const message = document.getElementById('message').value.trim();

                console.log("üìù Form data:", {name, phone, vehicleType, vehicleBrand, vehicleModel, problem, message});

                // Validate
                if (!name || !phone || !vehicleType || !message) {
                    alert('‚ùå Please fill all required fields (Name, Phone, Vehicle Type, Message)');
                    console.warn("‚ùå Validation failed");
                    return;
                }

                // Clean phone
                const cleanPhone = phone.replace(/\D/g, '');
                console.log("üìû Original phone:", phone, "‚Üí Cleaned:", cleanPhone);

                const data = {
                    name,
                    phone: cleanPhone,
                    vehicleType,
                    vehicleBrand,
                    vehicleModel,
                    problem,
                    message,
                    latitude: '',
                    longitude: ''
                };

                try {
                    // Show loading
                    const originalText = submitBtn.innerHTML;
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';
                    console.log("‚è≥ Sending request...");

                    // Construct backend URL
                    const backendURL = 'https://new-on-wheels.vercel.app/api/book';
                    console.log("üåê Backend URL:", backendURL);

                    // Send request
                    const response = await fetch(backendURL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });

                    console.log("üì° Response status:", response.status);
                    const result = await response.json();
                    console.log("üìä Response data:", result);

                    if (response.ok && result.ok) {
                        console.log("‚úÖ Success! Redirecting to payment...");
                        
                        // Construct URL parameters for payment page
                        const params = new URLSearchParams({
                            name: name,
                            phone: cleanPhone,
                            vehicleType: vehicleType,
                            vehicleBrand: vehicleBrand,
                            vehicleModel: vehicleModel,
                            service: problem,
                            message: message
                        });
                        
                        // Redirect to payment page with service details
                        window.location.href = `payment.html?${params.toString()}`;
                    } else {
                        throw new Error(result.error || 'Request failed');
                    }
                } catch (err) {
                    console.error('‚ùå ERROR:', err);
                    alert('‚ùå FAILED!\n\nError: ' + err.message + '\n\nCall us: +91 9794575236');
                } finally {
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = originalText;
                }
            });
        } else {
            console.error("‚ùå Submit button NOT found!");
        }

        // Geolocation
        const getLocationBtn = document.getElementById('getLocationBtn');
        const messageTextarea = document.getElementById('message');
        if (getLocationBtn && messageTextarea) {
            getLocationBtn.addEventListener('click', () => {
                if (!navigator.geolocation) {
                    alert('Geolocation not supported');
                    return;
                }
                getLocationBtn.disabled = true;
                getLocationBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Fetching...';
                
                navigator.geolocation.getCurrentPosition(function(position) {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    const apiUrl = `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`;
                    
                    fetch(apiUrl)
                        .then(r => r.json())
                        .then(data => {
                            const address = data.display_name || `Lat: ${lat}, Lon: ${lon}`;
                            messageTextarea.value = `My Location:\n${address}\n\n---\n` + messageTextarea.value;
                            getLocationBtn.innerHTML = '<i class="fas fa-check"></i> Location Added!';
                            setTimeout(() => {
                                getLocationBtn.disabled = false;
                                getLocationBtn.innerHTML = '<i class="fas fa-map-marker-alt"></i> Use My Location';
                            }, 2000);
                        })
                        .catch(() => {
                            messageTextarea.value = `My Location:\nLat: ${lat}, Lon: ${lon}\n\n---\n` + messageTextarea.value;
                            getLocationBtn.disabled = false;
                            getLocationBtn.innerHTML = '<i class="fas fa-map-marker-alt"></i> Use My Location';
                        });
                }, function() {
                    alert('Location access denied');
                    getLocationBtn.disabled = false;
                    getLocationBtn.innerHTML = '<i class="fas fa-map-marker-alt"></i> Use My Location';
                });
            });
        }
    });
    </script>
</body>
</html>
